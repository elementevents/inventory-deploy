import{j as a,x as l,d as u,J as g}from"./index-D0UzDXdb.js";import{a as x,D as f}from"./constants-BmjxfpbN.js";import{e as S}from"./exportAllServerSide-C8VwC7Gv.js";import{G as h}from"./GenericDataDisplay-CxpY1wFs.js";import{D as d,u as y,s as A,a as D}from"./tableSortMapper-CSDzbaka.js";import{u as j}from"./useStores-B7MFHYap.js";import{D as C}from"./DataTableRowActions-DY1NkkRo.js";import"./skeleton-DTNZejXw.js";import"./download-DZIx6H2S.js";import"./circle-plus-I0ki6lX-.js";import"./stores-CiuYeObQ.js";const E=n=>{const o=[{accessorKey:"name",header:({column:e})=>a.jsx(d,{column:e,title:"Name"}),cell:({row:e})=>{const s=e.original.is_active;return a.jsx("div",{className:l("max-w-[200px] truncate font-medium",{"opacity-30":!s}),children:e.getValue("name")})}},{accessorKey:"address",header:({column:e})=>a.jsx(d,{column:e,title:"Address"}),cell:({row:e})=>{const s=e.original.is_active;return a.jsx("div",{className:l("max-w-[500px] truncate",{"opacity-30":!s}),children:e.getValue("address")})}}];return["admin"].includes(n)&&o.push({id:"actions",cell:({row:e})=>a.jsx(C,{editHref:`/stores/${e.original.id}`,row:e})}),o};function R(){const{user:n}=u(),{filters:o,setFilters:e}=y(g.id),{data:s,isLoading:m}=j(o),i={pageIndex:o.pageIndex??f,pageSize:o.pageSize??x},r=A(o.sortBy);if(n===null)return a.jsx("div",{});const c=["admin"].includes(n.role);return a.jsx(h,{addHref:"/stores/new",addLabel:"Add Store",allowCreation:c,allowExport:c,columns:E(n.role),data:s,description:"Manage your stores.",filterPlaceholder:"Search stores...",isLoading:m,searchValue:o.q??"",onExportClick:async()=>S("stores"),onSearchFieldChange:t=>{e({q:t,pageIndex:0})},onSortingChange:t=>{const p=typeof t=="function"?t(r):t;return e({sortBy:D(p)})},pagination:i,paginationOptions:{onPaginationChange:t=>{e(typeof t=="function"?t(i):t)},rowCount:s==null?void 0:s.total},sorting:r,title:"Stores"})}export{R as component};
