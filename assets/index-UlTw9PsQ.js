import{j as a,x as m,d as f,a1 as x,z as I,a2 as h}from"./index-BtYb8-V0.js";import{a as S,D as b,q as C}from"./constants-CRsvxbNR.js";import{D as p,u as j,s as v,a as D}from"./tableSortMapper-B6VlyApS.js";import{D as A}from"./DataTableRowActions-Bkb_Vn0d.js";import{e as B}from"./exportAllServerSide-CfbgVVYv.js";import{G as M}from"./GenericDataDisplay-QITEgXxx.js";import{I as E}from"./ImportDataDialog-Dvawb6wO.js";import{u as q}from"./bins-D0vX5Y72.js";import{u as w}from"./useBins-BOeQvLEc.js";import"./skeleton-DokP1lQC.js";import"./download-C25ryfOX.js";import"./circle-plus-DaP9AdiF.js";import"./zod-BUbzqq3g.js";import"./upload-BruT5l65.js";const T=s=>{const o=[{accessorKey:"name",header:({column:e})=>a.jsx(p,{column:e,title:"Name"}),cell:({row:e})=>{const i=e.original.is_active;return a.jsx("div",{className:m("max-w-[200px] truncate font-medium",{"opacity-30":!i}),children:e.getValue("name")})}},{accessorKey:"store",header:({column:e})=>a.jsx(p,{column:e,title:"Store"}),cell:({row:e})=>{const i=e.getValue("store"),n=e.original.is_active;return a.jsx("div",{className:m("max-w-[200px] truncate",{"opacity-30":!n}),children:i.name})}}];return["admin","manager"].includes(s)&&o.push({id:"actions",cell:({row:e})=>a.jsx(A,{editHref:`/bins/${e.original.id}`,row:e})}),o};function X(){const{user:s}=f(),{filters:o,setFilters:e}=j(x.id),{data:i,isLoading:n}=w(o),u=I(),r={pageIndex:o.pageIndex??b,pageSize:o.pageSize??S},c=v(o.sortBy);function d(){u.invalidateQueries({queryKey:C.bins.all})}if(s===null)return a.jsx("div",{});const g=["admin"].includes(s.role),l=["admin","manager"].includes(s.role);return a.jsx(M,{addHref:"/bins/new",addLabel:"Add Bin",allowCreation:l,allowExport:g,allowImport:l,columns:T(s.role),data:i,description:"Manage your bins.",filterPlaceholder:"Search bins...",importDialog:a.jsx(E,{onSuccess:d,processor:q,schema:h,templateUrl:"https://ngojeciepusvopacvqby.supabase.co/storage/v1/object/sign/templates/bins.csv?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJ0ZW1wbGF0ZXMvYmlucy5jc3YiLCJpYXQiOjE3MzIxMTI5MTEsImV4cCI6MzMyMzY1NzY5MTF9.D4ZMJ_0BHLLCfWPMg0jk-iriUgtnv-r0dbq34H1uqqY"}),isLoading:n,searchValue:o.q??"",onExportClick:async()=>B("bins"),onSearchFieldChange:t=>{e({q:t,pageIndex:0})},onSortingChange:t=>{const y=typeof t=="function"?t(c):t;return e({sortBy:D(y)})},pagination:r,paginationOptions:{onPaginationChange:t=>{e(typeof t=="function"?t(r):t)},rowCount:i==null?void 0:i.total},sorting:c,title:"Bins"})}export{X as component};
