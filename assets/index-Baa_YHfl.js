import{j as a,z as m,d as f,a2 as x,A as I,a3 as h}from"./index-D8216wL9.js";import{a as S,D as b,q as C}from"./constants-CTS4Tt_R.js";import{D as p,u as j,s as v,a as A}from"./tableSortMapper-Cm7e_pFC.js";import{D}from"./DataTableRowActions-CMMHfLo4.js";import{e as B}from"./exportAllServerSide-CdfmhKBi.js";import{G as M}from"./GenericDataDisplay-XsoJG4Ft.js";import{I as E}from"./ImportDataDialog-e2ZEd4No.js";import{u as q}from"./bins-A4B25_TF.js";import{u as w}from"./useBins-UJklLGw4.js";import"./skeleton-0mPzxIqF.js";import"./download-D3XByiNT.js";import"./circle-plus-B1ywgHUg.js";import"./zod-Co59NxBk.js";import"./upload-CQuExhRE.js";const T=s=>{const o=[{accessorKey:"name",header:({column:e})=>a.jsx(p,{column:e,title:"Name"}),cell:({row:e})=>{const i=e.original.is_active;return a.jsx("div",{className:m("max-w-[200px] truncate font-medium",{"opacity-30":!i}),children:e.getValue("name")})}},{accessorKey:"store",header:({column:e})=>a.jsx(p,{column:e,title:"Store"}),cell:({row:e})=>{const i=e.getValue("store"),n=e.original.is_active;return a.jsx("div",{className:m("max-w-[200px] truncate",{"opacity-30":!n}),children:i.name})}}];return["admin","manager"].includes(s)&&o.push({id:"actions",cell:({row:e})=>a.jsx(D,{editHref:`/bins/${e.original.id}`,row:e})}),o};function X(){const{user:s}=f(),{filters:o,setFilters:e}=j(x.id),{data:i,isLoading:n}=w(o),u=I(),r={pageIndex:o.pageIndex??b,pageSize:o.pageSize??S},c=v(o.sortBy);function d(){u.invalidateQueries({queryKey:C.bins.all})}if(s===null)return a.jsx("div",{});const g=["admin"].includes(s.role),l=["admin","manager"].includes(s.role);return a.jsx(M,{addHref:"/bins/new",addLabel:"Add Bin",allowCreation:l,allowExport:g,allowImport:l,columns:T(s.role),data:i,description:"Manage your bins.",filterPlaceholder:"Search bins...",importDialog:a.jsx(E,{onSuccess:d,processor:q,schema:h,templateUrl:"https://ngojeciepusvopacvqby.supabase.co/storage/v1/object/sign/templates/bins.csv?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJ0ZW1wbGF0ZXMvYmlucy5jc3YiLCJpYXQiOjE3MzIxMTI5MTEsImV4cCI6MzMyMzY1NzY5MTF9.D4ZMJ_0BHLLCfWPMg0jk-iriUgtnv-r0dbq34H1uqqY"}),isLoading:n,searchValue:o.q??"",onExportClick:async()=>B("bins"),onSearchFieldChange:t=>{e({q:t,pageIndex:0})},onSortingChange:t=>{const y=typeof t=="function"?t(c):t;return e({sortBy:A(y)})},pagination:r,paginationOptions:{onPaginationChange:t=>{e(typeof t=="function"?t(r):t)},rowCount:i==null?void 0:i.total},sorting:c,title:"Bins"})}export{X as component};
