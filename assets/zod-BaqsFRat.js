import{b2 as l}from"./index-DBk3o_Wl.js";var w=r=>r instanceof Date,p=r=>r==null;const N=r=>typeof r=="object";var m=r=>!p(r)&&!Array.isArray(r)&&N(r)&&!w(r),g=r=>/^\w*$/.test(r),y=r=>r===void 0,O=r=>Array.isArray(r)?r.filter(Boolean):[],h=r=>O(r.replace(/["|']|\]/g,"").split(/\.|\[/)),d=(r,o,t)=>{if(!o||!m(r))return t;const e=(g(o)?[o]:h(o)).reduce((n,i)=>p(n)?n:n[i],r);return y(e)||e===r?y(r[o])?t:r[o]:e},u=(r,o,t)=>{let e=-1;const n=g(o)?[o]:h(o),i=n.length,s=i-1;for(;++e<i;){const a=n[e];let c=t;if(e!==s){const f=r[a];c=m(f)||Array.isArray(f)?f:isNaN(+n[e+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;r[a]=c,r=r[a]}};const x=l.createContext(null);x.displayName="HookFormContext";typeof window<"u"?l.useLayoutEffect:l.useEffect;var _=(r,o,t,e,n)=>o?{...t[r],types:{...t[r]&&t[r].types?t[r].types:{},[e]:n||!0}}:{};const v=(r,o,t)=>{if(r&&"reportValidity"in r){const e=d(t,o);r.setCustomValidity(e&&e.message||""),r.reportValidity()}},E=(r,o)=>{for(const t in o.fields){const e=o.fields[t];e&&e.ref&&"reportValidity"in e.ref?v(e.ref,t,r):e.refs&&e.refs.forEach(n=>v(n,t,r))}},P=(r,o)=>{o.shouldUseNativeValidation&&E(r,o);const t={};for(const e in r){const n=d(o.fields,e),i=Object.assign(r[e]||{},{ref:n&&n.ref});if(U(o.names||Object.keys(r),e)){const s=Object.assign({},d(t,e));u(s,"root",i),u(t,e,s)}else u(t,e,i)}return t},U=(r,o)=>r.some(t=>t.startsWith(o+"."));var k=function(r,o){for(var t={};r.length;){var e=r[0],n=e.code,i=e.message,s=e.path.join(".");if(!t[s])if("unionErrors"in e){var a=e.unionErrors[0].errors[0];t[s]={message:a.message,type:a.code}}else t[s]={message:i,type:n};if("unionErrors"in e&&e.unionErrors.forEach(function(A){return A.errors.forEach(function(V){return r.push(V)})}),o){var c=t[s].types,f=c&&c[e.code];t[s]=_(s,o,t,n,f?[].concat(f,e.message):e.message)}r.shift()}return t},j=function(r,o,t){return t===void 0&&(t={}),function(e,n,i){try{return Promise.resolve(function(s,a){try{var c=Promise.resolve(r[t.mode==="sync"?"parse":"parseAsync"](e,o)).then(function(f){return i.shouldUseNativeValidation&&E({},i),{errors:{},values:t.raw?e:f}})}catch(f){return a(f)}return c&&c.then?c.then(void 0,a):c}(0,function(s){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(s))return{values:{},errors:P(k(s.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw s}))}catch(s){return Promise.reject(s)}}};export{j as t};
