import{z as f,u as h,b as p,m as j,n as g,aF as b,j as e,F as v,o as l,p as m,q as c,t as S,I as F,v as d}from"./index-CJiv-3wc.js";import{t as C}from"./zod-CmWlcYXS.js";import{B as N}from"./Button-DZr7fyJu.js";import{C as y}from"./Combobox-DqsX9H-1.js";import{F as w}from"./FormSkeleton-CDGPTwYk.js";import{u as B}from"./useMutation-D54SsBfs.js";import{q}from"./constants-CRsvxbNR.js";import{c as E}from"./bins-BWqnKSZW.js";import{a as L}from"./useStores-adHlH20E.js";import"./chevrons-up-down-Dc-trnbu.js";import"./skeleton-DqkA8ofe.js";import"./stores-Bmu119iR.js";function A(){const r=f(),a=h(),{toast:n}=p();return B({mutationFn:t=>E(t),onSuccess:()=>{r.invalidateQueries({queryKey:q.bins.all}),a({to:"/bins"}),n({title:"Bin created successfully!",description:"The bin has been created."})},onError:t=>{let s="Something went wrong!";(j(t)||t instanceof Error)&&(s=t.message),n({title:"Failed to create bin!",description:s,variant:"destructive"})}})}function H(){const{data:r,error:a,isLoading:n}=L(),t=A(),s=g({defaultValues:{name:"",store_id:""},resolver:C(b)});async function u(i){await t.mutateAsync(i)}const x=()=>{if(n)return e.jsx(w,{});if(a)return e.jsxs("p",{className:"text-red-500",children:["Error: ",a.message]});if(!r)return e.jsx("p",{className:"text-red-500",children:"Can't fetch stores data."});const{formState:{isSubmitting:i}}=s;return e.jsx(v,{...s,children:e.jsxs("form",{className:"max-w-2xl",onSubmit:s.handleSubmit(u),children:[e.jsx("div",{className:"w-full grid gap-2",children:e.jsx(l,{control:s.control,name:"name",render:({field:o})=>e.jsxs(m,{className:"w-full",children:[e.jsx(c,{children:"Name"}),e.jsx(S,{children:e.jsx(F,{disabled:i,placeholder:"Bin name",required:!0,...o})}),e.jsx(d,{})]})})}),e.jsx("div",{className:"w-full grid gap-2 mt-4",children:e.jsx(l,{control:s.control,name:"store_id",render:({field:o})=>e.jsxs(m,{children:[e.jsx(c,{children:"Store"}),e.jsx(y,{items:r,onValueChange:o.onChange,placeholder:"Select a store",value:o.value}),e.jsx(d,{})]})})}),e.jsx(N,{className:"w-full mt-8",isLoading:s.formState.isSubmitting,label:"Save",loadingLabel:"Saving...",type:"submit"})]})})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col space-y-1.5",children:[e.jsx("h3",{className:"text-2xl font-semibold leading-none tracking-tight",children:"Add Bin"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a new bin."})]})}),e.jsx("div",{children:x()})]})}export{H as component};
