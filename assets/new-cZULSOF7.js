import{z as m,u as c,b as u,m as d,n as x,ao as f,j as e,F as h,o as r,p as j,q as g,t as l,I as p,v as o,ap as v}from"./index-D0UzDXdb.js";import{t as F}from"./zod-fFyjxTVb.js";import{B as b}from"./Button-fnRQMAsf.js";import{u as w}from"./useMutation-Dl_MGIkD.js";import{q as y}from"./constants-BmjxfpbN.js";import{r as N,c as S}from"./units-BmqAMdNn.js";import{S as C}from"./switch-JFT-bvvN.js";function q(){const n=m(),t=c(),{toast:a}=u();return w({mutationFn:async s=>{s.is_default&&await N(),await S(s)},onSuccess:()=>{n.invalidateQueries({queryKey:y.units.all}),t({to:"/units"}),a({title:"Unit created successfully!",description:"The unit has been created."})},onError:s=>{let i="Something went wrong!";(d(s)||s instanceof Error)&&(i=s.message),a({title:"Failed to create unit!",description:i,variant:"destructive"})}})}function M(){const n=q(),t=x({defaultValues:{is_default:!1,name:""},resolver:F(f)});async function a(s){await n.mutateAsync(s)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col space-y-1.5",children:[e.jsx("h3",{className:"text-2xl font-semibold leading-none tracking-tight",children:"Add Unit"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a new unit."})]})}),e.jsx("div",{children:e.jsx(h,{...t,children:e.jsxs("form",{className:"max-w-2xl",onSubmit:t.handleSubmit(a),children:[e.jsx("div",{className:"w-full grid gap-2",children:e.jsx(r,{control:t.control,name:"name",render:({field:s})=>e.jsxs(j,{className:"w-full",children:[e.jsx(g,{children:"Name"}),e.jsx(l,{children:e.jsx(p,{placeholder:"Unit name",required:!0,...s})}),e.jsx(o,{})]})})}),e.jsx("div",{className:"w-full grid gap-2 mt-4",children:e.jsx(r,{control:t.control,name:"is_default",render:({field:s})=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{children:e.jsx(C,{checked:s.value,onCheckedChange:s.onChange})}),e.jsx(v,{className:"ml-1",htmlFor:"is_default",children:"is default"}),e.jsx(o,{})]})})}),e.jsx(b,{className:"w-full mt-8",isLoading:t.formState.isSubmitting,label:"Save",loadingLabel:"Saving...",type:"submit"})]})})})]})}export{M as component};
