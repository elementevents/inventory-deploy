import{z as y,u as b,b as S,m as F,aG as N,n as C,aH as w,r as L,j as e,F as q,o as m,p as x,q as h,t as p,I as B,v as c,ap as _}from"./index-CcPo3f9H.js";import{t as E}from"./zod-C6DuHt7F.js";import{B as k}from"./Button-zpjn9-p1.js";import{C as K}from"./Combobox-UlFFGo4G.js";import{F as Q}from"./FormSkeleton-BN5jgn0W.js";import{u as I}from"./skeleton-DL_E4KtD.js";import{q as d}from"./constants-CRsvxbNR.js";import{r as M,b as R}from"./bins-Ci5rfjn5.js";import{a as U}from"./useStores-D1kvVeIa.js";import{u as A}from"./useMutation-DOzOABS6.js";import{S as T}from"./switch-tz_B7xRt.js";import"./chevrons-up-down-Dvgg1f8V.js";import"./stores-B3IE6u9Z.js";function z(a){return I({queryKey:d.bins.detail(a),queryFn:async()=>M(a)})}function D(a){const o=y(),i=b(),{toast:l}=S();return A({mutationFn:s=>R(a,s),onSuccess:()=>{o.invalidateQueries({queryKey:d.bins.detail(a)}),o.invalidateQueries({queryKey:d.bins.lists()}),i({to:"/bins"}),l({title:"Bin updated successfully!",description:"The bin has been updated."})},onError:s=>{let t="Something went wrong!";(F(s)||s instanceof Error)&&(t=s.message),l({title:"Failed to update bin!",description:t,variant:"destructive"})}})}function ae(){const{id:a}=N.useParams(),{data:o,error:i,isLoading:l}=U(),{data:s,error:t,isLoading:f}=z(a),g=D(a),r=C({resolver:E(w),values:{is_active:(s==null?void 0:s.is_active)??!1,name:(s==null?void 0:s.name)??"",store_id:(s==null?void 0:s.store.id)??""}});L.useEffect(()=>{s&&r.reset({name:s.name,store_id:s.store.id,is_active:s.is_active})},[s,r]);async function j(u){await g.mutateAsync(u)}const v=()=>f||l?e.jsx(Q,{}):t||i?e.jsxs("p",{className:"text-red-500",children:["Error: ",(t==null?void 0:t.message)||(i==null?void 0:i.message)]}):s?o?e.jsx(q,{...r,children:e.jsxs("form",{className:"max-w-2xl",onSubmit:r.handleSubmit(j),children:[e.jsx("div",{className:"w-full grid gap-2",children:e.jsx(m,{control:r.control,name:"name",render:({field:n})=>e.jsxs(x,{className:"w-full",children:[e.jsx(h,{children:"Name"}),e.jsx(p,{children:e.jsx(B,{placeholder:"Bin name",required:!0,...n})}),e.jsx(c,{})]})})}),e.jsx("div",{className:"w-full grid gap-2 mt-4",children:e.jsx(m,{control:r.control,name:"store_id",render:({field:n})=>e.jsxs(x,{children:[e.jsx(h,{children:"Store"}),e.jsx(K,{items:o??[],onValueChange:n.onChange,placeholder:"Select a store",value:n.value}),e.jsx(c,{})]})})}),e.jsx("div",{className:"w-full grid gap-2 mt-4",children:e.jsx(m,{control:r.control,name:"is_active",render:({field:n})=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{children:e.jsx(T,{checked:n.value,onCheckedChange:n.onChange})}),e.jsx(_,{className:"ml-1",htmlFor:"is_active",children:"is active"}),e.jsx(c,{})]})})}),e.jsx(k,{className:"w-full mt-8",isLoading:r.formState.isSubmitting,label:"Save",loadingLabel:"Saving...",type:"submit"})]})}):e.jsx("p",{className:"text-red-500",children:"Can't fetch stores data."}):e.jsx("p",{className:"text-red-500",children:"Can't fetch bin data."});return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col space-y-1.5",children:[e.jsx("h3",{className:"text-2xl font-semibold leading-none tracking-tight",children:"Update Bin"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update a bin."})]})}),e.jsx("div",{children:v()})]})}export{ae as component};
